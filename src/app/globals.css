@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── Cozy Warm Theme ─────────────────────────────── */
:root {
  --bg: #FBF7F2;
  --bg-warm: #F5EDE3;
  --surface: #FFFFFF;
  --surface-raised: #FFF8F0;
  --surface-glass: rgba(255, 255, 255, 0.72);
  --text: #2C2520;
  --text-secondary: #7A6E64;
  --text-muted: #B0A79E;
  --border: #E8E0D8;
  --border-light: #F2ECE5;
  --accent: #D4845A;
  --accent-hover: #C07348;
  --accent-light: #FAEEE6;
  --accent-glow: rgba(212, 132, 90, 0.25);
  --accent-subtle: #F0D9C8;
  --ember: #E8956A;
  --ember-glow: rgba(232, 149, 106, 0.2);
  --sage: #8FAE8B;
  --sage-light: #EDF4EC;
  --lavender: #A594C4;
  --lavender-light: #F0ECF6;
  --rose: #C4868F;
  --rose-light: #F8ECEE;

  /* Theme toggle */
  --toggle-bg: #F0E6DA;
  --toggle-knob: #FFFFFF;
  --toggle-icon: #D4845A;
  --toggle-glow: rgba(212, 132, 90, 0.3);

  /* Transition overlay */
  --theme-transition: 0.5s;
}

.dark {
  --bg: #1A1614;
  --bg-warm: #211D1A;
  --surface: #242019;
  --surface-raised: #2E2923;
  --surface-glass: rgba(36, 32, 25, 0.78);
  --text: #F2EDE8;
  --text-secondary: #A69D94;
  --text-muted: #6B6259;
  --border: #3A342D;
  --border-light: #2E2923;
  --accent: #E8956A;
  --accent-hover: #F0A57C;
  --accent-light: #332418;
  --accent-glow: rgba(232, 149, 106, 0.2);
  --accent-subtle: #3D2E22;
  --ember: #D4845A;
  --ember-glow: rgba(212, 132, 90, 0.15);
  --sage: #7A9B76;
  --sage-light: #1E261D;
  --lavender: #8A7AAF;
  --lavender-light: #232030;
  --rose: #B07078;
  --rose-light: #2D1F22;

  --toggle-bg: #2E2923;
  --toggle-knob: #F2EDE8;
  --toggle-icon: #E8956A;
  --toggle-glow: rgba(232, 149, 106, 0.4);
}

html {
  scroll-behavior: smooth;
}

/* View Transition cross-fade for theme switch */
::view-transition-old(root),
::view-transition-new(root) {
  animation-duration: 0.2s;
  animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Let the toggle animate independently — no snapshot freeze */
::view-transition-old(theme-toggle),
::view-transition-new(theme-toggle) {
  animation: none;
  mix-blend-mode: normal;
}

body {
  font-family: var(--font-dm-sans), 'DM Sans', system-ui, sans-serif;
  background: var(--bg);
  color: var(--text);
}

/* ── Staggered page-enter fades (CSS only) ───────── */
.stagger-1, .stagger-2, .stagger-3, .stagger-4, .stagger-5, .stagger-6, .stagger-7 {
  opacity: 0;
  animation: fade-up 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}
.stagger-1 { animation-delay: 0.05s; }
.stagger-2 { animation-delay: 0.1s; }
.stagger-3 { animation-delay: 0.18s; }
.stagger-4 { animation-delay: 0.26s; }
.stagger-5 { animation-delay: 0.36s; }
.stagger-6 { animation-delay: 0.46s; }
.stagger-7 { animation-delay: 0.56s; }

@keyframes fade-up {
  from { opacity: 0; transform: translateY(16px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ── Gentle breathing pulse ──────────────────────── */
@keyframes breathe {
  0%, 100% { transform: scale(1); opacity: 0.7; }
  50% { transform: scale(1.08); opacity: 1; }
}

/* ── Warm float ──────────────────────────────────── */
@keyframes warm-float {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  33% { transform: translateY(-12px) rotate(1deg); }
  66% { transform: translateY(-6px) rotate(-1deg); }
}

/* ── Slow drift ──────────────────────────────────── */
@keyframes drift {
  0%, 100% { transform: translate(0, 0); }
  25% { transform: translate(8px, -6px); }
  50% { transform: translate(-4px, -12px); }
  75% { transform: translate(-8px, -4px); }
}

/* ── Soft glow pulse ─────────────────────────────── */
@keyframes glow-pulse {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 0.8; }
}

/* ── Shimmer for loading skeletons ──────────────── */
@keyframes shimmer {
  0%   { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.skeleton {
  background: linear-gradient(90deg, var(--border-light) 25%, var(--border) 50%, var(--border-light) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
  border-radius: 8px;
}

/* ── Focus ring ─────────────────────────────────── */
.focus-ring:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px var(--bg), 0 0 0 4px var(--accent);
}

/* ── Scrollbar ──────────────────────────────────── */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

/* ── Noise texture overlay ───────────────────────── */
.noise-overlay::before {
  content: '';
  position: fixed;
  inset: 0;
  z-index: 9999;
  pointer-events: none;
  opacity: 0.025;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 256px 256px;
}

/* ── Glass effect ────────────────────────────────── */
.glass {
  background: var(--surface-glass);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
}

/* ── Reduced motion ─────────────────────────────── */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
